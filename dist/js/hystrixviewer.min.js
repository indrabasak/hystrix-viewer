var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.checkStringArgs=function(a,c,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(a,c,d,h){if(c){d=$jscomp.global;a=a.split(".");for(h=0;h<a.length-1;h++){var e=a[h];e in d||(d[e]={});d=d[e]}a=a[a.length-1];h=d[a];c=c(h);c!=h&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(c,d){var a=$jscomp.checkStringArgs(this,c,"startsWith");c+="";var e=a.length,m=c.length;d=Math.max(0,Math.min(d|0,a.length));for(var k=0;k<m&&d<e;)if(a[d++]!=c[k++])return!1;return k>=m}},"es6-impl","es3");
(function(a,c,d){function h(a,l,n){this.circuitDivId=void 0;this.circuitKey=a;this.serviceName=l;this.methodName=n;this.initialized=!1;this.jsonData=this.graphDivId=this.chartDivId=void 0;this.graphData=[];this.errorPercentage=this.ratePerSecondPerHost=this.ratePerSecond=void 0;this.render=function(){this.circuitDivId="CIRCUIT_"+this.serviceName+"_"+this.methodName;var b=c("<div></div>").attr("id",this.circuitDivId).addClass("monitor").css({position:"relative"});c("#"+q).append(b);this.addChart(b);
this.addTitle(b);this.addData(b);this.addLineGraph(b)};this.refresh=function(b){this.jsonData=b;this.calcRatePerSecond(b);this.render()};this.addChart=function(b){this.chartDivId="chart_CIRCUIT_"+this.serviceName+"_"+this.methodName;var g=c("<div></div>").attr("id",this.chartDivId).addClass("chart").css({position:"absolute",top:"0px",left:"0","float":"left",width:"100%",height:"100%"});b.append(g);this.addCircle(this.chartDivId)};this.addCircle=function(b){b=d.select("#"+b).append("svg:svg").attr("width",
"100%").attr("height","100%").append("svg:circle");var c=u(this.ratePerSecondPerHost);parseInt(c,10)>parseInt("40%",10)&&(c="40%");var a=v(this.ratePerSecondPerHost);parseInt(a,10)>parseInt("40%",10)&&(a="40%");var f=w(this.ratePerSecondPerHost);125<parseInt(f,10)&&(f="125");b.transition().duration(400).attr("cy",a).attr("cx",c).attr("r",f).style("fill",x(this.errorPercentage))};this.addTitle=function(b){var g=c("<div></div>").css({position:"absolute",top:"0px",width:"100%",height:"15px",opacity:"0.8",
background:"white"});b.append(g);b=c("<p></p>").addClass("name").text(this.serviceName+"."+this.methodName);g.append(b)};this.addData=function(b){var g=c("<div></div>");c(g).css({position:"absolute",top:"15px",opacity:"0.8",background:"white",width:"100%",height:"95%"});b.append(g);b=c("<div></div>").addClass("monitor_data");g.append(b);this.addCounters(b);this.addRate(b);this.addDataTable(b)};this.addCounters=function(b){var g=c("<div></div>").addClass("counters");b.append(g);b=c("<div></div>").addClass("cell line").html('<a href="javascript://" title="Error Percentage [Timed-out + Threadpool Rejected + Failure / Total]"class="hystrix-tooltip errorPercentage"><span class="value">'+
this.errorPercentage+"</span>%</a>");g.append(b);b='<a href="javascript://" title="Timed-out Request Count"class="line hystrix-tooltip timeout"><span class="value">'+e(this.jsonData,this.circuitKey+".rollingCountTimeout",0)+"</span></a>";var a=e(this.jsonData,this.circuitKey+".rollingCountThreadPoolRejected",-20),a=-20===a?'<a href="javascript://" title="Semaphore Rejected Request Count"class="line hystrix-tooltip rejected"><span class="value">'+e(this.jsonData,this.circuitKey+".rollingCountSemaphoreRejected",
0)+"</span></a>":'<a href="javascript://" title="Threadpool Rejected Request Count"class="line hystrix-tooltip rejected"><span class="value">'+a+"</span></a>",f='<a href="javascript://" title="Failure Request Count"class="line hystrix-tooltip failure"><span class="value">'+e(this.jsonData,this.circuitKey+".rollingCountFailure",0)+"</span></a>";b=c("<div></div>").addClass("cell borderRight").html(b+"\n"+a+"\n"+f);g.append(b);b='<a href="javascript://" title="Successful Request Count"class="line hystrix-tooltip success"><span class="value">'+
e(this.jsonData,this.circuitKey+".rollingCountSuccess",0)+"</span></a>";a='<a href="javascript://" title="Short-circuited Request Count"class="line hystrix-tooltip shortCircuited"><span class="value">'+e(this.jsonData,this.circuitKey+".rollingCountShortCircuited",0)+"</span></a>";f='<a href="javascript://" title="Bad Request Count"class="line hystrix-tooltip badRequest"><span class="value">'+e(this.jsonData,this.circuitKey+".rollingCountBadRequests",0)+"</span></a>";b=c("<div></div>").addClass("cell borderRight").html(b+
"\n"+a+"\n"+f);g.append(b)};this.addRate=function(b){var a='<a href="javascript://" title="Total Request Rate per Second per Reporting Host"class="hystrix-tooltip rate"><span class="smaller">Host: </span><span class="ratePerSecondPerHost">'+this.ratePerSecondPerHost+"</span>/s</a>",a=c("<div></div>").addClass("rate").html(a);b.append(a);a='<a href="javascript://" title="Total Request Rate per Second for Cluster"class="hystrix-tooltip rate"><span class="smaller">Cluster: </span><span class="ratePerSecond">'+
this.ratePerSecond+"</span>/s</a>";a=c("<div></div>").addClass("rate").html(a);b.append(a)};this.addDataTable=function(b){var a=c("<div></div>").addClass("spacer");b.append(a);var f=e(this.jsonData,this.circuitKey+".reportingHosts",1),d=e(this.jsonData,this.circuitKey+".90",0),l=e(this.jsonData,this.circuitKey+".50",0),n=e(this.jsonData,this.circuitKey+".99",0),a=e(this.jsonData,this.circuitKey+".latencyExecute_mean",0),h=e(this.jsonData,this.circuitKey+".99.5",0),f=c('<div class="tableRow"><div class="cell header">Hosts</div><div class="cell data">'+
f+' </div><div class="cell header">90th</div><div class="cell data latency90"><span class="value">'+d+"</span>ms </div></div>");b.append(f);l=c('<div class="tableRow"><div class="cell header">Median</div><div class="cell data latencyMedian"><span class="value">'+l+'</span>ms </div><div class="cell header">99th</div><div class="cell data latency99"><span class="value">'+n+"</span>ms </div></div>");b.append(l);a=c('<div class="tableRow"><div class="cell header">Mean</div><div class="cell data latencyMean"><span class="value">'+
a+'</span>ms</div><div class="cell header">99.5th</div><div class="cell data latency995"><span class="value">'+h+"</span>ms</div></div>");b.append(a)};this.addLineGraph=function(b){this.graphDivId="graph_CIRCUIT_"+this.serviceName+"_"+this.methodName;var a=c("<div></div>").attr("id",this.graphDivId).addClass("graph").css({position:"absolute",top:"25px",left:"0","float":"left",width:"140px",height:"62px"});b.append(a);b=d.select("#"+this.graphDivId).append("svg:svg").attr("width","100%").attr("height",
"100%");a=(new Date).getTime();for(this.graphData.push({v:parseFloat(this.ratePerSecond),t:a});200<this.graphData.length;)this.graphData.shift();if(1!==this.graphData.length||0!==this.graphData[0].v){1<this.graphData.length&&0===this.graphData[0].v&&0!==this.graphData[1].v&&this.graphData.shift();var f=d.scaleTime().domain([new Date(a-12E4),new Date(a)]).range([0,140]),a=d.min(this.graphData,function(b){return b.v}),e=d.max(this.graphData,function(b){return b.v}),l=d.scaleLinear().domain([a,e]).nice().range([60,
0]),n=d.line().x(function(b){return f(new Date(b.t))}).y(function(b){return l(b.v)}).curve(d.curveBasis),h=this.graphData;b.append("svg:path").attr("d",function(b,a){return n(h)})}};this.calcRatePerSecond=function(b){var a=e(b,this.circuitKey+".propertyValue_metricsRollingStatisticalWindowInMilliseconds",0)/1E3,c=e(b,this.circuitKey+".requestCount",0);0>c&&(c=0);var f=e(b,this.circuitKey+".reportingHosts",0);this.ratePerSecond=m(c/a);this.ratePerSecondPerHost=m(c/a/f);this.errorPercentage=e(b,this.circuitKey+
".errorPercentage",0)}}function e(a,c,d){if(a[k.GAUGE.type]&&(a=a[k.GAUGE.type][c]))try{if(a.value){var b=Math.pow(10,4);d=Math.round(a.value*b)/b}}catch(g){}return d}function m(a){a=(Math.round(a*Math.pow(10,1))/Math.pow(10,1)).toString();-1==a.indexOf(".")&&(a+=".0");return a}a.addHystrixDashboard=function(a){r=a;var d=c("<div></div>").addClass("hystrix-container");c(r).append(d);a=c("<div></div>").addClass("row");c(d).append(a);d=c("<div></div>").addClass("hystrix-menubar");c(a).append(d);var f=
c("<div></div>").addClass("title").text("Circuit");c(d).append(f);q="dependencies";d=c("<div></div>").attr("id",q).addClass("row").addClass("dependencies");a.append(d)};a.init=function(){for(var a=0;a<t.length;a++)t[a].render()};a.refresh=function(a){if(r){y(a);c("#"+q).empty();for(var d in p)p.hasOwnProperty(d)&&p[d].refresh(a)}};a.clear=function(){};Array.prototype.clear=function(){for(;this.length;)this.pop()};var k={COUNTER:{type:"counters",xLabel:"time",yLabel:"count"},GAUGE:{type:"gauges",xLabel:"time",
yLabel:"value"},METER:{type:"meters",xLabel:"time",yLabel:""},TIMER:{type:"timers",xLabel:"time",yLabel:""}};Object.freeze(k);Object.freeze(100);var t=[];Object.freeze("40%");Object.freeze("40%");Object.freeze("125");var w=d.scalePow().exponent(.5).domain([0,400]).range(["5","125"]),v=d.scaleLinear().domain([0,400]).range(["30%","40%"]),u=d.scaleLinear().domain([0,400]).range(["30%","40%"]),x=d.scaleLinear().domain([10,25,40,50]).range(["green","#FFCC00","#FF9900","red"]),r,q,p={},y=function(a){for(var d in a)a.hasOwnProperty(d)&&
d===k.GAUGE.type&&c.each(a[k.GAUGE.type],function(a,b){a.startsWith("gauge.hystrix.HystrixCommand")&&(b=a.split("."),6==b.length&&(a=b[0]+"."+b[1]+"."+b[2]+"."+b[3]+"."+b[4],p[a]||6!=b.length||(console.log(b[3]+"."+b[4]),b=new h(a,b[3],b[4]),p[a]=b)))})}})(window.hystrixViewer=window.hystrixViewer||{},jQuery,d3);
