!function(t,e){"function"==typeof define&&define.amd?define(["jquery","d3"],e):"object"==typeof exports?module.exports=e(require("jquery"),require("d3")):t.hystrixViewer=e(t.jQuery,t.d3)}(this,function(t,e){function a(e){var a=t("<div></div>").addClass("hystrix-row");t(e).append(a);var i=t("<div></div>").addClass("hystrix-menubar");t(a).append(i);var r=t("<div></div>").addClass("title").text("Circuit");t(i).append(r);var s=t("<div></div>").addClass("menu_actions").html('Sort: <a href="javascript://" onclick="hystrixViewer.sortByErrorThenVolume();">Error then Volume</a> | <a href="javascript://" onclick="hystrixViewer.sortAlphabetically();">Alphabetical</a> | <a href="javascript://" onclick="hystrixViewer.sortByVolume();">Volume</a> | <a href="javascript://" onclick="hystrixViewer.sortByError();">Error</a> | <a href="javascript://" onclick="hystrixViewer.sortByLatencyMean();">Mean</a> | <a href="javascript://" onclick="hystrixViewer.sortByLatencyMedian();">Median</a> | <a href="javascript://" onclick="hystrixViewer.sortByLatency90();">90</a> | <a href="javascript://" onclick="hystrixViewer.sortByLatency99();">99</a> | <a href="javascript://" onclick="hystrixViewer.sortByLatency995();">99.5</a> ');t(i).append(s);var d=t("<div></div>").addClass("menu_legend").html('<span class="success">Success</span> | <span class="shortCircuited">Short-Circuited</span> | <span class="badRequest"> Bad Request</span> | <span class="timeout">Timeout</span> | <span class="rejected">Rejected</span> | <span class="failure">Failure</span> | <span class="errorPercentage">Error %</span>');t(i).append(d),T="dependencies";var n=t("<div></div>").attr("id",T).addClass("hystrix-row").addClass("dependencies");t(e).append(n)}function i(e){var a=t("<div></div>").addClass("hystrix-row");t(e).append(a);var i=t("<div></div>").addClass("hystrix-menubar");t(a).append(i);var r=t("<div></div>").addClass("title").text("Thread Pools");t(i).append(r);var s=t("<div></div>").addClass("menu_actions").html('Sort: <a href="javascript://" onclick="hystrixViewer.sortThreadpoolAlphabetically();">Alphabetical</a> | <a href="javascript://" onclick="hystrixViewer.sortThreadpoolByVolume();">Volume</a>');t(i).append(s),R="dependencyThreadPools";var d=t("<div></div>").attr("id",R).addClass("hystrix-row").addClass("dependencyThreadPools");t(e).append(d)}function r(t,e){var a,i,r,s,d;!D&&t.startsWith("gauge.hystrix.HystrixCommand")&&(a=t.split("."),6==a.length?(i=a[3]+"."+a[4],V[i]||(r=a[0]+"."+a[1]+"."+a[2]+"."+a[3]+"."+a[4],s=a[3]+"."+a[4]+"."+a[5],e[s]&&(r=a[3]+"."+a[4],D=!0),d=new l(T,r,a[3],a[4]),V[i]=d,y())):(a=t.split("."),3==a.length&&(i=a[1]+"."+a[2],V[i]||(s=a[1]+"."+a[2]+".countShortCircuited",e[s]&&(r=i,d=new l(T,r,a[1],a[2]),V[i]=d,D=!0,y())))))}function s(t){var e,a,i,r;t.startsWith("gauge.hystrix.HystrixThreadPool")&&(e=t.split("."),5==e.length&&(a=e[3],b[a]||(i=e[0]+"."+e[1]+"."+e[2]+"."+e[3],r=new x(R,i,e[3]),b[a]=r,C())))}function d(t,e,a){var i=a;if(console.log(e),t[_.GAUGE.type]){var r=t[_.GAUGE.type][e];if(r)try{if(r.value){var s=r.value;i="boolean"==typeof s?s?1:0:c(s,4)}}catch(t){}}return i}function n(t){var e=Math.round(t*Math.pow(10,1))/Math.pow(10,1),a=e.toString();return-1==a.indexOf(".")&&(a+=".0"),a}function c(t,e){e||(e=4);var a=Math.pow(10,e),i=t*a;return Math.round(i)/a}function l(a,i,r,s){this.parentDivId=a,this.metricKey=i,this.serviceName=r,this.methodName=s,this.suffix="_"+this.methodName,this.initialized=!1,this.circuitDivId="CIRCUIT_"+this.suffix,this.chartDivId="chart_CIRCUIT_"+this.suffix,this.dataDivId=this.chartDivId+"_monitor_data",this.graphDivId="graph_CIRCUIT_"+this.suffix,this.data={},this.graphData=[],this.render=function(){if(!this.initialized){var e=t("#"+this.parentDivId),a=t("<div></div>").addClass("monitor").attr("id",this.circuitDivId).css({position:"relative"});e.append(a),this.addChart(a),this.addTitle(a),this.addData(a),this.addSparkline(a),this.initialized=!0}},this.refresh=function(t){this.preProcessData(t),this.render(),this.updateCircle(),this.updateData(),this.updateSparkline()},this.clear=function(){t(this.circuitDivId).empty(),delete this.circuitDivId,t(this.chartDivId).empty(),delete this.chartDivId,t(this.dataDivId).empty(),delete this.dataDivId,t(this.graphDivId).empty(),delete this.graphDivId,delete this.data,delete this.graphData},this.addChart=function(e){var a=t("<div></div>").attr("id",this.chartDivId).addClass("chart").css({position:"absolute",top:"15px",left:"0",float:"left",width:"100%",height:"100%"});e.append(a),this.addCircle(this.chartDivId)},this.addCircle=function(t){e.select("#"+t).append("svg:svg").attr("width","100%").attr("height","100%").append("svg:circle").style("fill","green").attr("cx","30%").attr("cy","30%").attr("r",5)},this.updateCircle=function(){var t=k(this.data.ratePerSecondPerHost);parseInt(t,10)>parseInt(P,10)&&(t=P);var a=B(this.data.ratePerSecondPerHost);parseInt(a,10)>parseInt(w,10)&&(a=w);var i=j(this.data.ratePerSecondPerHost);parseInt(i,10)>parseInt(S,10)&&(i=S),e.selectAll("#"+this.chartDivId+" circle").transition().duration(400).attr("cy",a).attr("cx",t).attr("r",i).style("fill",H(this.data.errorPercentage))},this.addTitle=function(e){var a='<p class="service-name"'+this.serviceName+">"+this.serviceName+'</p> <p class="name"'+this.serviceName+"."+this.methodName+">"+this.methodName+"</p>",i=t("<div></div>").css({position:"absolute",top:"0px",width:"100%",height:"30px",opacity:"0.8",background:"white"}).html(a);e.append(i)},this.addData=function(e){var a=t("<div></div>");t(a).css({position:"absolute",top:"30px",opacity:"0.8",background:"white",width:"100%",height:"95%"}),e.append(a);var i=t("<div></div>").attr("id",this.dataDivId).addClass("monitor_data");a.append(i)},this.updateData=function(){if(this.initialized){var e=t("#"+this.dataDivId);e.empty(),this.addCounters(e),this.addRate(e),this.addCircuitStatus(e),this.addDataTable(e),t("#"+this.circuitDivId).attr("rate_value",this.data.ratePerSecond).attr("error_then_volume",this.data.errorThenVolume),t("#"+this.circuitDivId+" a.errorPercentage").css("color",K(this.data.errorPercentage))}},this.addCounters=function(e){var a=t("<div></div>").addClass("counters");e.append(a);var i=t("<div></div>").addClass("hystrix-cell line").html('<a href="javascript://" title="Error Percentage [Timed-out + Threadpool Rejected + Failure / Total]" class="hystrix-tooltip errorPercentage"><span class="value">'+this.data.errorPercentage+"</span>%</a>");a.append(i);var r,s='<a href="javascript://" title="Timed-out Request Count" class="line hystrix-tooltip timeout"><span class="value">'+this.data.rollingCountTimeout+"</span></a>";r=this.data.rollingCountThreadPoolRejected?'<a href="javascript://" title="Threadpool Rejected Request Count" class="line hystrix-tooltip rejected"><span class="value">'+this.data.rollingCountThreadPoolRejected+"</span></a>":'<a href="javascript://" title="Semaphore Rejected Request Count" class="line hystrix-tooltip rejected"><span class="value">'+this.data.rollingCountSemaphoreRejected+"</span></a>";var d='<a href="javascript://" title="Failure Request Count" class="line hystrix-tooltip failure"><span class="value">'+this.data.rollingCountFailure+"</span></a>",n=t("<div></div>").addClass("hystrix-cell borderRight").html(s+"\n"+r+"\n"+d);a.append(n);var c='<a href="javascript://" title="Successful Request Count" class="line hystrix-tooltip success"><span class="value">'+this.data.rollingCountSuccess+"</span></a>",l='<a href="javascript://" title="Short-circuited Request Count" class="line hystrix-tooltip shortCircuited"><span class="value">'+this.data.rollingCountShortCircuited+"</span></a>",h='<a href="javascript://" title="Bad Request Count" class="line hystrix-tooltip badRequest"><span class="value">'+this.data.rollingCountBadRequests+"</span></a>",o=t("<div></div>").addClass("hystrix-cell borderRight").html(c+"\n"+l+"\n"+h);a.append(o)},this.addRate=function(e){var a='<a href="javascript://" title="Total Request Rate per Second per Reporting Host" class="hystrix-tooltip rate"><span class="smaller">Host: </span><span class="ratePerSecondPerHost">'+this.data.ratePerSecondPerHost+"</span>/s</a>",i=t("<div></div>").addClass("rate").html(a);e.append(i);var r='<a href="javascript://" title="Total Request Rate per Second for Cluster" class="hystrix-tooltip rate"><span class="smaller">Cluster: </span><span class="ratePerSecond">'+this.data.ratePerSecond+"</span>/s</a>",s=t("<div></div>").addClass("rate").html(r);e.append(s)},this.addCircuitStatus=function(e){var a="";this.data.propertyValue_circuitBreakerForceClosed&&1===this.data.propertyValue_circuitBreakerForceClosed&&(a='<span class="smaller">[<span style="color:orange">Forced Closed</span> ]'),this.data.propertyValue_circuitBreakerForceOpen&&1===this.data.propertyValue_circuitBreakerForceOpen&&(a='Circuit <style="color:red">Forced Open</span>'),a=this.data.isCircuitBreakerOpen===this.data.reportingHosts?'Circuit <span style="color:red">Open</span>':0===this.data.isCircuitBreakerOpen?'Circuit <span style="color:green">Closed</span>':"Circuit &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";var i=t("<div></div>").addClass("circuitStatus").html(a);e.append(i)},this.addDataTable=function(e){var a=t("<div></div>").addClass("spacer");e.append(a);var i=t('<div class="tableRow"><div class="hystrix-cell hystrix-header hystrix-left">Hosts</div><div class="hystrix-cell hystrix-data hystrix-left">'+this.data.reportingHosts+' </div><div class="hystrix-cell hystrix-header hystrix-right">90th</div><div class="hystrix-cell hystrix-data hystrix-right latency90"><span class="value">'+this.data.latency90+"</span>ms </div></div>");e.append(i);var r=t('<div class="tableRow"><div class="hystrix-cell hystrix-header hystrix-left">Median</div><div class="hystrix-cell hystrix-data hystrix-left latencyMedian"><span class="value">'+this.data.latencyMedian+'</span>ms </div><div class="hystrix-cell hystrix-header hystrix-right">99th</div><div class="hystrix-cell hystrix-data hystrix-right latency99"><span class="value">'+this.data.latency99+"</span>ms </div></div>");e.append(r);var s=t('<div class="tableRow"><div class="hystrix-cell hystrix-header hystrix-left">Mean</div><div class="hystrix-cell hystrix-data hystrix-left latencyMean"><span class="value">'+this.data.latencyMean+'</span>ms</div><div class="hystrix-cell hystrix-header hystrix-right">99.5th</div><div class="hystrix-cell hystrix-data hystrix-right latency995"><span class="value">'+this.data.latency995+"</span>ms</div></div>");e.append(s)},this.addSparkline=function(a){var i=t("<div></div>").attr("id",this.graphDivId).addClass("graph").css({position:"absolute",top:"38px",left:"0",float:"left",width:"140px",height:"62px"});a.append(i),e.select("#"+this.graphDivId).append("svg:svg").attr("width","100%").attr("height","100%").append("svg:path")},this.updateSparkline=function(){var t=(new Date).getTime();for(this.graphData.push({v:parseFloat(this.data.ratePerSecond),t:t});this.graphData.length>200;)this.graphData.shift();if(1!==this.graphData.length||0!==this.graphData[0].v){this.graphData.length>1&&0===this.graphData[0].v&&0!==this.graphData[1].v&&this.graphData.shift();var a=e.scaleTime().domain([new Date(t-12e4),new Date(t)]).range([0,140]),i=e.min(this.graphData,function(t){return t.v}),r=e.max(this.graphData,function(t){return t.v}),s=e.scaleLinear().domain([i,r]).nice().range([60,0]),d=e.line().x(function(t){return a(new Date(t.t))}).y(function(t){return s(t.v)}).curve(e.curveBasis),n=this.graphData;e.selectAll("#"+this.graphDivId+" path").attr("d",function(t,e){return d(n)})}},this.preProcessData=function(t){this.data={};var e=d(t,this.metricKey+".propertyValue_metricsRollingStatisticalWindowInMilliseconds",0)/1e3,a=d(t,this.metricKey+".requestCount",0);a<0&&(a=0);var i=d(t,this.metricKey+".reportingHosts",0);this.data.ratePerSecond=n(a/e),this.data.ratePerSecondPerHost=n(a/e/i),this.data.ratePerSecondPerHostDisplay=this.data.ratePerSecondPerHost,this.data.errorPercentage=d(t,this.metricKey+".errorPercentage",0),this.data.errorThenVolume=isNaN(this.data.ratePerSecond)?-1:1e8*this.data.errorPercentage+this.data.ratePerSecond,this.data.rollingCountTimeout=d(t,this.metricKey+".rollingCountTimeout",0);var r=d(t,this.metricKey+".rollingCountThreadPoolRejected",-20);-20===r?this.data.rollingCountSemaphoreRejected=d(t,this.metricKey+".rollingCountSemaphorePoolRejected",0):this.data.rollingCountThreadPoolRejected=r,this.data.rollingCountFailure=d(t,this.metricKey+".rollingCountFailure",0),this.data.rollingCountSuccess=d(t,this.metricKey+".rollingCountSuccess",0),this.data.rollingCountShortCircuited=d(t,this.metricKey+".rollingCountShortCircuited",0),this.data.rollingCountBadRequests=d(t,this.metricKey+".rollingCountBadRequests",0),this.data.reportingHosts=d(t,this.metricKey+".reportingHosts",1),this.data.latency90=d(t,this.metricKey+".90",0),this.data.latencyMedian=d(t,this.metricKey+".50",0),this.data.latency99=d(t,this.metricKey+".99",0),this.data.latencyMean=d(t,this.metricKey+".latencyExecute_mean",0),this.data.latency995=d(t,this.metricKey+".99.5",0);var s=d(t,this.metricKey+".propertyValue_circuitBreakerForceClosed",-20);console.log("propertyValue_circuitBreakerForceClosed: "+s),-20!==s&&(this.data.propertyValue_circuitBreakerForceClosed=s);var c=d(t,this.metricKey+".propertyValue_circuitBreakerForceOpen",-20);console.log("propertyValue_circuitBreakerForceOpen: "+c),-20!==c&&(this.data.propertyValue_circuitBreakerForceOpen=c);var l=d(t,this.metricKey+".isCircuitBreakerOpen",-20);console.log("isCircuitBreakerOpen: "+l),-20!==l&&(this.data.isCircuitBreakerOpen=l)}}function h(e){var a=t("#dependencies div.monitor");F="rate_"+e,a.tsort({order:e,attr:"rate_value"})}function o(e){var a=t("#dependencies div.monitor");F="error_"+e,a.tsort(".errorPercentage .value",{order:e})}function p(e){var a=t("#dependencies div.monitor");F="error_then_volume_"+e,a.tsort({order:e,attr:"error_then_volume"})}function v(e){var a=t("#dependencies div.monitor");F="alph_"+e,a.tsort("p.name",{order:e})}function u(e,a){t("#dependencies div.monitor").tsort(a,{order:e})}function y(){"alph_asc"==F?v("asc"):"alph_desc"==F?v("desc"):"rate_asc"==F?h("asc"):"rate_desc"==F?h("desc"):"error_asc"==F?o("asc"):"error_desc"==F?o("desc"):"error_then_volume_asc"==F?p("asc"):"error_then_volume_desc"==F?p("desc"):"lat90_asc"==F?u("asc",".latency90 .value"):"lat90_desc"==F?u("desc",".latency90 .value"):"lat99_asc"==F?u("asc",".latency99 .value"):"lat99_desc"==F?u("desc",".latency99 .value"):"lat995_asc"==F?u("asc",".latency995 .value"):"lat995_desc"==F?u("desc",".latency995 .value"):"latMean_asc"==F?u("asc",".latencyMean .value"):"latMean_desc"==F?u("desc",".latencyMean .value"):"latMedian_asc"==F?u("asc",".latencyMedian .value"):"latMedian_desc"==F&&u("desc",".latencyMedian .value")}function x(a,i,r){this.parentDivId=a,this.metricKey=i,this.serviceName=r,this.data={},this.initialized=!1,this.threadDivId="THREAD_POOL_"+this.serviceName,this.chartDivId="chart_THREAD_POOL_"+this.serviceName,this.dataDivId=this.chartDivId+"_monitor_data",this.refresh=function(t){this.preProcessData(t),this.render(),this.updateCircle(),this.updateData()},this.render=function(){if(!this.initialized){var e=t("#"+this.parentDivId),a=t("<div></div>").attr("id",this.threadDivId).addClass("monitor").css({position:"relative"});e.append(a),this.addChart(a),this.addTitle(a),this.addData(a),this.initialized=!0}},this.clear=function(){t(this.threadDivId).empty(),delete this.threadDivId,t(this.chartDivId).empty(),delete this.chartDivId,t(this.dataDivId).empty(),delete this.dataDivId,delete this.data},this.addChart=function(e){var a=t("<div></div>").attr("id",this.chartDivId).addClass("chart").css({position:"absolute",top:"0px",left:"0",float:"left",width:"100%",height:"100%"});e.append(a),this.addCircle(this.chartDivId)},this.addCircle=function(t){e.select("#"+t).append("svg:svg").attr("width","100%").attr("height","100%").append("svg:circle").style("fill","green").attr("cx","30%").attr("cy","30%").attr("r",5)},this.updateCircle=function(){var t=E(this.data.ratePerSecondPerHost);parseInt(t)>parseInt(P)&&(t=P);var a=O(this.data.ratePerSecondPerHost);parseInt(a)>parseInt(w)&&(a=w);var i=z(this.data.ratePerSecondPerHost);parseInt(i)>parseInt(S)&&(i=S),e.selectAll("#"+this.chartDivId+" circle").transition().duration(400).attr("cy",a).attr("cx",t).attr("r",i).style("fill",q(this.data.errorPercentage))},this.addTitle=function(e){var a='<p class="name"'+this.serviceName+">"+this.serviceName+"</p>",i=t("<div></div>").css({position:"absolute",top:"0px",width:"100%",height:"15px",opacity:"0.8",background:"white"}).html(a);e.append(i)},this.addData=function(e){var a=t("<div></div>");t(a).css({position:"absolute",top:"15px",opacity:"0.8",background:"white",width:"100%",height:"95%"}),e.append(a);var i=t("<div></div>").attr("id",this.dataDivId).addClass("monitor_data");a.append(i)},this.updateData=function(){if(this.initialized){var e=t("#"+this.dataDivId);e.empty();var a=t("<div></div>").addClass("spacer");e.append(a),this.addRate(e),this.addDataTable(e)}},this.addRate=function(e){var a='<a href="javascript://" title="Total Execution Rate per Second per Reporting Host" class="hystrix-tooltip rate"><span class="smaller">Host: </span><span class="ratePerSecondPerHost">'+this.data.ratePerSecondPerHost+"</span>/s</a>",i=t("<div></div>").addClass("rate").html(a);e.append(i);var r='<a href="javascript://" title="Total Execution Rate per Second for Cluster" class="hystrix-tooltip rate"><span class="smaller">Cluster: </span><span class="ratePerSecond">'+this.data.ratePerSecond+"</span>/s</a>",s=t("<div></div>").addClass("rate").html(r);e.append(s)},this.addDataTable=function(e){var a=t("<div></div>").addClass("spacer");e.append(a);var i=t('<div class="tableRow"><div class="hystrix-cell hystrix-header hystrix-left">Active</div><div class="hystrix-cell hystrix-data hystrix-left">'+this.data.currentActiveCount+' </div><div class="hystrix-cell hystrix-header hystrix-right">Max Active</div><div class="hystrix-cell hystrix-data hystrix-right">'+this.data.rollingMaxActiveThreads+"</div></div>");e.append(i);var r=t('<div class="tableRow"><div class="hystrix-cell hystrix-header hystrix-left">Queued</div><div class="hystrix-cell hystrix-data hystrix-left"><span class="value">'+this.data.currentQueueSize+'</span></div><div class="hystrix-cell hystrix-header hystrix-right">Executions</div><div class="hystrix-cell hystrix-data hystrix-right"><span class="value">'+this.data.rollingCountThreadsExecuted+"</span></div></div>");e.append(r);var s=t('<div class="tableRow"><div class="hystrix-cell hystrix-header hystrix-left">Pool Size</div><div class="hystrix-cell hystrix-data hystrix-left"><span class="value">'+this.data.currentPoolSize+'</span></div><div class="hystrix-cell hystrix-header hystrix-right">Queue Size</div><div class="hystrix-cell hystrix-data hystrix-right"><span class="value">'+this.data.propertyValue_queueSizeRejectionThreshold+"</span></div></div>");e.append(s)},this.preProcessData=function(t){this.data={};var e=d(t,this.metricKey+".reportingHosts",0);this.data.reportingHosts=e;var a=d(t,this.metricKey+".propertyValue_queueSizeRejectionThreshold",0);this.data.propertyValue_queueSizeRejectionThreshold=n(a/e);var i=d(t,this.metricKey+".propertyValue_metricsRollingStatisticalWindowInMilliseconds",0);this.data.propertyValue_metricsRollingStatisticalWindowInMilliseconds=n(i/e);var r=this.data.propertyValue_metricsRollingStatisticalWindowInMilliseconds/1e3,s=d(t,this.metricKey+".rollingCountThreadsExecuted",0);s<0&&(s=0),this.data.ratePerSecond=n(s/r),this.data.ratePerSecondPerHost=n(s/r/e),this.data.currentActiveCount=d(t,this.metricKey+".currentActiveCount",0),this.data.rollingMaxActiveThreads=d(t,this.metricKey+".rollingMaxActiveThreads",0),this.data.currentQueueSize=d(t,this.metricKey+".currentQueueSize",0),this.data.rollingCountThreadsExecuted=d(t,this.metricKey+".rollingCountThreadsExecuted",0),this.data.currentPoolSize=d(t,this.metricKey+".currentPoolSize",0),this.data.propertyValue_queueSizeRejectionThreshold=d(t,this.metricKey+".propertyValue_queueSizeRejectionThreshold",0),this.data.currentQueueSize=d(t,this.metricKey+".currentQueueSize",0),this.data.errorPercentage=this.data.currentQueueSize/this.data.reportingHosts}}function f(e){var a=t("#dependencyThreadPools div.monitor");A="alph_"+e,a.tsort("p.name",{order:e})}function m(e){var a=t("#dependencyThreadPools div.monitor");A="rate_"+e,a.tsort({order:e,attr:"rate_value"})}function g(e,a){t("#dependencyThreadPools div.monitor").tsort(a,{order:e})}function C(){"alph_asc"==A?f("asc"):"alph_desc"==A?f("desc"):"rate_asc"==A?m("asc"):"rate_desc"==A?m("desc"):"lat90_asc"==A?g("asc","p90"):"lat90_desc"==A?g("desc","p90"):"lat99_asc"==A?g("asc","p99"):"lat99_desc"==A?g("desc","p99"):"lat995_asc"==A?g("asc","p995"):"lat995_desc"==A?g("desc","p995"):"latMean_asc"==A?g("asc","pMean"):"latMean_desc"==A?g("desc","pMean"):"latMedian_asc"==A?g("asc","pMedian"):"latMedian_desc"==A&&g("desc","pMedian")}window.hystrixViewer={version:"1.0.0"},hystrixViewer.addHystrixDashboard=function(e){I=e;var r=t("<div></div>").addClass("hystrix-outer-container");t(I).append(r);var s=t("<div></div>").attr("id","hystrix-header").html("<h2><span id='title_name'>Hystrix Metrics</span></h2>");r.append(s);var d=t("<div></div>").addClass("hystrix-container");r.append(d),a(d);var n=t("<div></div>").addClass("hystrix-spacer");t(d).append(n),i(d)},hystrixViewer.refresh=function(t){if(I){M(t);for(var e in V)V.hasOwnProperty(e)&&V[e].refresh(t);for(var a in b)b.hasOwnProperty(a)&&b[a].refresh(t)}},hystrixViewer.clear=function(){for(var t in V)V.hasOwnProperty(t)&&V[t].clear();V={};for(var e in b)b.hasOwnProperty(e)&&b[e].clear();b={}};var _={COUNTER:{type:"counters"},GAUGE:{type:"gauges"},METER:{type:"meters"},TIMER:{type:"timers"}};Object.freeze(_);var D=!1,P="40%";Object.freeze(P);var w="40%";Object.freeze(w);var S="125";Object.freeze(S);var I,T,R,V={},b={},M=function(e){for(var a in e)if(e.hasOwnProperty(a)&&a===_.GAUGE.type){var i=e[_.GAUGE.type];t.each(i,function(t,e){r(t,i),s(t)})}},j=e.scalePow().exponent(.5).domain([0,400]).range(["5",S]),B=e.scaleLinear().domain([0,400]).range(["30%",P]),k=e.scaleLinear().domain([0,400]).range(["30%",w]),H=e.scaleLinear().domain([10,25,40,50]).range(["green","#FFCC00","#FF9900","red"]),K=e.scaleLinear().domain([0,10,35,50]).range(["grey","black","#FF9900","red"]),F="alph_asc";hystrixViewer.sortByVolume=function(){var t="desc";"rate_desc"==F&&(t="asc"),h(t)},hystrixViewer.sortByError=function(){var t="desc";"error_desc"==F&&(t="asc"),o(t)},hystrixViewer.sortByErrorThenVolume=function(){var t="desc";"error_then_volume_desc"==F&&(t="asc"),p(t)},hystrixViewer.sortAlphabetically=function(){var t="asc";"alph_asc"==F&&(t="desc"),v(t)},hystrixViewer.sortByLatency90=function(){var t="desc";"lat90_desc"==F&&(t="asc"),F="lat90_"+t,u(t,".latency90 .value")},hystrixViewer.sortByLatency99=function(){var t="desc";"lat99_desc"==F&&(t="asc"),F="lat99_"+t,u(t,".latency99 .value")},hystrixViewer.sortByLatency995=function(){var t="desc";"lat995_desc"==F&&(t="asc"),F="lat995_"+t,u(t,".latency995 .value")},hystrixViewer.sortByLatencyMean=function(){var t="desc";"latMean_desc"==F&&(t="asc"),F="latMean_"+t,u(t,".latencyMean .value")},hystrixViewer.sortByLatencyMedian=function(){var t="desc";"latMedian_desc"==F&&(t="asc"),F="latMedian_"+t,u(t,".latencyMedian .value")};Object.freeze(2e3);var z=e.scalePow().exponent(.5).domain([0,2e3]).range(["5",S]),O=e.scaleLinear().domain([0,2e3]).range(["30%",P]),E=e.scaleLinear().domain([0,2e3]).range(["30%",w]),q=e.scaleLinear().domain([10,25,40,50]).range(["green","#FFCC00","#FF9900","red"]),A=(e.scaleLinear().domain([0,10,35,50]).range(["grey","black","#FF9900","red"]),"alph_asc");return hystrixViewer.sortThreadpoolAlphabetically=function(){var t="asc";"alph_asc"==A&&(t="desc"),f(t)},hystrixViewer.sortThreadpoolByVolume=function(){var t="desc";"rate_desc"==A&&(t="asc"),m(t)},hystrixViewer});